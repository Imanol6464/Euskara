<!DOCTYPE html>
<html lang="eu">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Euskara App - v7 Full</title>
  <style>
    body { font-family: Arial, sans-serif; margin:0; background:#f9fafb; color:#111; }
    header { background:#007A3D; color:#fff; padding:1em; text-align:center; }
    .lesson-list { display:flex; flex-wrap:wrap; justify-content:center; padding:1em; }
    .lesson-card { background:#fff; border-radius:10px; box-shadow:0 2px 6px rgba(0,0,0,0.1); margin:1em; padding:1em; width:200px; text-align:center; cursor:pointer; }
    .question-container { display:none; padding:2em; }
    .popup { display:none; position:fixed; top:0; left:0; right:0; bottom:0; background:rgba(0,0,0,0.6); justify-content:center; align-items:center; }
    .popup-content { background:#fff; padding:2em; border-radius:10px; max-width:500px; text-align:center; }
    .btn { display:inline-block; margin:0.5em; padding:1em 2em; border:none; border-radius:8px; font-size:1.1em; cursor:pointer; }
    .btn-green { background:#007A3D; color:#fff; }
    .btn-red { background:#D90429; color:#fff; }
    .progress { margin:1em 0; font-weight:bold; }
  </style>
</head>
<body>
  <header><h1>Euskara App v7</h1></header>
  <div id="lessonList" class="lesson-list">
    <div class="lesson-card" onclick="startLesson(1)">Le√ßon 1 : Agurrak</div>
    <div class="lesson-card" onclick="startLesson(2)">Le√ßon 2 : Adeitasuna</div>
    <div class="lesson-card" onclick="startLesson(3)">Le√ßon 3 : Aurkezpena</div>
    <div class="lesson-card" onclick="startLesson(4)">Le√ßon 4 : Behar oinarrizkoak</div>
    <div class="lesson-card" onclick="startLesson(5)">Le√ßon 5 : Zenbakiak eta egunak</div>
    <div class="lesson-card" onclick="startLesson(6)">Le√ßon 6 : Familia</div>
    <div class="lesson-card" onclick="startLesson(7)">Le√ßon 7 : Jatea eta edatea</div>
    <div class="lesson-card" onclick="startLesson(8)">Le√ßon 8 : Tokian toki</div>
    <div class="lesson-card" onclick="startLesson(9)">Le√ßon 9 : Ordua eta egunerokoa</div>
    <div class="lesson-card" onclick="startLesson(10)">Le√ßon 10 : Aditzak oinarri</div>
  </div>

  <div id="lessonIntro" style="display:none; padding:2em;">
    <h2 id="introTitle"></h2>
    <p id="introContent"></p>
    <button class="btn btn-green" onclick="beginQuestions()">Commencer la le√ßon</button>
  </div>

  <div id="questionContainer" class="question-container">
    <div class="progress" id="progressText"></div>
    <div id="questionText"></div>
    <div id="options"></div>
    <button class="btn btn-red" onclick="iDontKnow()">Je ne sais pas</button>
  </div>

  <div id="popup" class="popup">
    <div class="popup-content">
      <h2 id="popupTitle"></h2>
      <p id="popupMessage"></p>
      <button class="btn btn-green" onclick="closePopup()">Continuer</button>
    </div>
  </div>

<script>
let currentLesson = 0;
let currentIndex = 0;
let questions = [];
let errorQueue = [];

const lessons = {
  1: {
    title: "Le√ßon 1 : Agurrak",
    intro: "Vocabulaire des salutations : Kaixo (bonjour), Agur (au revoir), Bai (oui), Ez (non).",
    questions: [
      {q:"Comment dit-on 'Bonjour' en basque ?", options:["Kaixo","Agur","Bai"], answer:"Kaixo", explain:"Kaixo = Bonjour."},
      {q:"Comment dire 'Au revoir' ?", options:["Agur","Ez","Bai"], answer:"Agur", explain:"Agur = Au revoir."}
    ]
  },
  2: {
    title:"Le√ßon 2 : Adeitasuna",
    intro:"Formules de politesse : Eskerrik asko (merci beaucoup), Mesedez (s‚Äôil vous pla√Æt).",
    questions:[
      {q:"Comment dire 'Merci' ?", options:["Eskerrik asko","Mesedez"], answer:"Eskerrik asko", explain:"Eskerrik asko = Merci beaucoup."},
      {q:"Comment dire 'S‚Äôil vous pla√Æt' ?", options:["Mesedez","Agur"], answer:"Mesedez", explain:"Mesedez = S‚Äôil vous pla√Æt."}
    ]
  }
  // Le√ßons 3 √† 10 √† compl√©ter
};

function startLesson(n){
  currentLesson = n;
  document.getElementById('lessonList').style.display='none';
  document.getElementById('lessonIntro').style.display='block';
  document.getElementById('introTitle').innerText = lessons[n].title;
  document.getElementById('introContent').innerText = lessons[n].intro;
}

function beginQuestions(){
  document.getElementById('lessonIntro').style.display='none';
  document.getElementById('questionContainer').style.display='block';
  questions = [...lessons[currentLesson].questions];
  currentIndex=0; errorQueue=[];
  showQuestion();
}

function showQuestion(){
  if(currentIndex >= questions.length){
    if(errorQueue.length>0){
      questions = errorQueue;
      errorQueue=[];
      currentIndex=0;
    } else {
      endLesson();
      return;
    }
  }
  let q=questions[currentIndex];
  document.getElementById('progressText').innerText=(currentIndex+1)+"/"+questions.length;
  document.getElementById('questionText').innerText=q.q;
  let optionsHTML="";
  q.options.forEach(opt=>{
    optionsHTML+=`<button class="btn btn-green" onclick="checkAnswer('${opt}')">${opt}</button>`;
  });
  document.getElementById('options').innerHTML=optionsHTML;
}

function checkAnswer(ans){
  let q=questions[currentIndex];
  if(ans===q.answer){
    showPopup("Correct ‚úÖ", q.explain);
  } else {
    errorQueue.push(q);
    showPopup("Faux ‚ùå", "Bonne r√©ponse : "+q.answer+"\n"+q.explain);
  }
}

function iDontKnow(){
  let q=questions[currentIndex];
  errorQueue.push(q);
  showPopup("Je ne sais pas ‚ùå","Bonne r√©ponse : "+q.answer+"\n"+q.explain);
}

function showPopup(title,msg){
  document.getElementById('popupTitle').innerText=title;
  document.getElementById('popupMessage').innerText=msg;
  document.getElementById('popup').style.display='flex';
}

function closePopup(){
  document.getElementById('popup').style.display='none';
  currentIndex++;
  showQuestion();
}

function endLesson(){
  document.getElementById('questionContainer').style.display='none';
  document.getElementById('lessonList').style.display='flex';
  alert("Bravo ! Le√ßon termin√©e üéâ");
}
</script>
</body>
</html>
